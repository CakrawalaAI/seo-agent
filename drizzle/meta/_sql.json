{
  "version": "5",
  "dialect": "postgresql",
  "entries": {
    "0000_init": {
      "statements": []
    },
    "0001_add_dfs_language_code": {
      "statements": [
        "DO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1\n    FROM information_schema.columns\n    WHERE table_schema = 'public'\n      AND table_name = 'projects'\n      AND column_name = 'dfs_language_code'\n  ) THEN\n    ALTER TABLE \"projects\" ADD COLUMN \"dfs_language_code\" text NOT NULL DEFAULT 'en';\n  END IF;\nEND\n$$;"
      ]
    },
    "0002_add_keyword_scope": {
      "statements": [
        "DO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1\n    FROM information_schema.columns\n    WHERE table_schema = 'public'\n      AND table_name = 'keywords'\n      AND column_name = 'scope'\n  ) THEN\n    ALTER TABLE \"keywords\" ADD COLUMN \"scope\" text NOT NULL DEFAULT 'auto';\n  END IF;\nEND\n$$;"
      ]
    },
    "0003_add_project_discoveries": {
      "statements": [
        "CREATE TABLE IF NOT EXISTS \"project_discoveries\" (\n  \"id\" text PRIMARY KEY,\n  \"project_id\" text NOT NULL REFERENCES \"projects\"(\"id\") ON DELETE CASCADE,\n  \"summary_json\" jsonb,\n  \"seed_json\" jsonb,\n  \"crawl_json\" jsonb,\n  \"providers_json\" jsonb,\n  \"seed_count\" integer DEFAULT 0,\n  \"keyword_count\" integer DEFAULT 0,\n  \"started_at\" timestamptz,\n  \"completed_at\" timestamptz,\n  \"created_at\" timestamptz NOT NULL DEFAULT now(),\n  \"updated_at\" timestamptz NOT NULL DEFAULT now()\n);",
        "CREATE INDEX IF NOT EXISTS \"idx_project_discoveries_project\" ON \"project_discoveries\" (\"project_id\");"
      ]
    }
  }
}
